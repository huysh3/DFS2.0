<view class="page">
  <image bindtap="routerGoHome" class="banner" src="../../../image/DFS-banner.png"></image>
  <view class="topbar">
    <view class="left-part">合计 {{orderList.length}} 件商品</view>
    <!--<view class="right-part" bindtap="routerGoHistoryOrders">我的订单</view>-->
  </view>
  <view class="list-item" wx:for="{{orderList}}">
    <image class="delete-btn" src="../../../image/x.png" data-id="{{item.order.id}}" catchtap="deleteOrder"></image>
    <navigator url="/page/DFS/product/product?product_id={{item.product.id}}">
      <view class="top-content">
        <image class="product-img" src="{{item.product.order_banner}}"></image>
        <view class="brand">{{item.product.brand_name}}</view>
        <view class="name">{{item.product.name}}</view>
        <view class="price">${{item.product.price}} * {{item.order.number}}</view>
        <view class="clearfix"></view>
      </view>
    </navigator>
    <view class="price-content">
      <view class="total-rmb">(￥{{(item.product.RMB - item.product.RMB % 1) * item.order.number}})</view>
      <view wx:if="{{item.product.price % 1 == 0}}" class="total-price">${{item.product.price * item.order.number}}.00</view>
      <view wx:if="{{item.product.price % 1 != 0}}" class="total-price">${{item.product.price * item.order.number}}</view>
    </view>
  </view>

  <view class="takeplace-160"></view>

  <view class="order-confirm-bar">
    <view class="top-content">
      <view class="title">总 价</view>
      <view class="total-fee">${{total_price}} <view class="total-fee-rmb">(￥{{total_price_rmb}})</view></view>
      <view class="clearfix"></view>
    </view>
    <view class="btn-content">
      <view class="left-btn" bindtap="handleCombineBtn">预留订单</view>
      <view class="right-btn" bindtap="handleConfirmBtn"><image mode="widthFix" class="wechat-icon" src="../../../image/wechat.png"></image>微信支付</view>
    </view>

  </view>

  <import src="../../component/done-model/done-model.wxml"/>
  <template is="done-model" data="{{modalProps}}" wx:if="{{doneModalStatus}}"/>

  <view name="input-model" wx:if="{{inputModalState}}">
    <view class="mask"></view>
    <view class="input-modal-content">
      <view class="input-modal-header">
        输入联系电话以生成订单
      </view>
      <view class="modal-body">
        <input bindinput="bindKeyInput" type="text" class="phone-input"></input>
      </view>
      <view class="modal-footer">
        <view class="input-cancel-btn" bindtap="inputModalCancel">
          取消
        </view>
        <view class="input-confirm-btn" bindtap="confirmOrder">
          确认
        </view>
      </view>
    </view>
  </view>
</view>

<import src="../../component/service-btn/service-btn.wxml"/>
<template is="service-btn"/>
